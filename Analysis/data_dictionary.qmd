---
title: HTW Data Dictionary
date: last-modified
categories: [Analysis, R]
page-layout: full
code-fold: true
code-tools: true
execute: 
  warning: false
  eval: true
---







```{r}
pacman::p_load(tidyverse, lme4, emmeans, here, knitr, kableExtra,gt)
options(dplyr.summarise.inform = FALSE)
d <- readRDS(here("data/dPrune-07-27-23.rds")) %>% ungroup()
d$stage <- factor(d$stage, ordered = TRUE, levels = c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23"))
d$tOrder <- factor(d$tOrder, levels = c("testFirst", "trainFirst"), labels = c("Test First", "Train First"))
d$bandOrder <- factor(d$bandOrder, levels = c("orig", "rev"), labels = c("Original", "Reverse"))
d$fb <- factor(d$fb, levels = c("continuous", "ordinal"), labels = c("Continuous", "Ordinal"))
d <- d %>%
    mutate(id = as.factor(d$id), fullCond = as.factor(fullCond)) %>%
    relocate(bandOrder, .after = fb)

```


```{r}
# create table with number of unique ids per condition, use kable
d %>% select(fullCond,id) %>% distinct() %>% group_by(fullCond) %>% summarise(n=n()) %>% knitr::kable()

t1=d %>% select(condit,fb,bandOrder,tOrder,id) %>% distinct() %>% 
  group_by(condit,fb,bandOrder,tOrder) %>% summarise(n=n()) 
t1 %>% kbl(col.names=c("Condition","Feedback","Band_Order","Test Order","N"),escape=FALSE) 

t1=d %>% select(condit,fb,bandOrder,id) %>% distinct() %>% 
  group_by(condit,fb,bandOrder) %>% summarise(n=n()) 
t1
```

## Tibble1
```{r}
# Create the tribble
data_tbl <- tibble(
  Variable_Name = c("condit", "fb", "bandOrder", "tOrder", "expMode", "trainStage", "expStage", "band", "vb", "lowBound", "feedback", "stage"),
  Variable_Levels = c("Constant, Varied", "Continuous, Ordinal", "Original, Reverse", "Test First, Train First", "train, train-Nf, test-Nf, test-train-nf, test-feedback", "Beginning, Middle, End, Test", "TrainStart, intTest1, TrainMid1, intTest2, TrainMid2, intTest3, TrainEnd, Test1, Test2, Test3", "1, 2, 3, 4, 5, 6", "100-300, 350-550, 600-800, 800-1000, 1000-1200, 1200-1400", "100, 350, 600, 800, 1000, 1200", "0, 1", "1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23"),
  Description = rep("Unknown", 12)
)

# Print the tribble
data_tbl %>% gt::gt()
```

## Tibble
```{r}

data <- tibble(
  `Variable Name` = c("condit", "fb", "bandOrder", "tOrder", "expMode", "trainStage",
                      "expStage", "band", "vb", "lowBound", "feedback", "stage"),
  `Levels` = c("Constant, Varied", 
               "Continuous, Ordinal",
               "Original, Reverse",
               "Test First, Train First",
               "train, train-Nf, test-Nf, test-train-nf, test-feedback",
               "Beginning, Middle, End, Test",
               "TrainStart, intTest1, TrainMid1, intTest2, TrainMid2, intTest3, TrainEnd, Test1, Test2, Test3",
               "1, 2, 3, 4, 5, 6",
               "100-300, 350-550, 600-800, 800-1000, 1000-1200, 1200-1400",
               "100, 350, 600, 800, 1000, 1200",
               "0, 1",
               "1 to 23"),
  `Description` = c("Conditions under which training was performed. In 'Constant' only one velocity band was used, in 'Varied' three different bands were used.",
                    "Two types of feedback given to the subjects. The 'Continuous' type involved ongoing feedback whereas 'Ordinal' feedback type was rank-based",
                    "The order in which the velocity bands were presented for the 'Hit The Wall' task - either 'Original' or 'Reverse'.",
                    "The order of test and train stages.",
                    "Specifies the mode of the experiment. Can be one of the training stages, no-feedback testing from the training or novel extrapolation band, or feedback testing.",
                    "The stage of training for the individual - starting, middle, end, or if they're testing.",
                    "The stages in the experiment which includes the start and end of training, intermediate tests, and final test stages.",
                    "Identifies the 6 different velocity bands used in the experiment.",
                    "Specifies the range of each velocity band used in the experiment.",
                    "The lower boundary of each velocity band.",
                    "Binary representation of whether feedback was provided (1) or not (0)",
                    "The various stages during testing and feedback, represented by numbers from 1 to 23.")
)
data %>% gt::gt()

```

## Tribble
```{r}
tribble(
  ~Variable, ~Levels, ~Description,
  "condit", "Constant, Varied", "Conditions under which training was performed. In 'Constant' only one velocity band was used, in 'Varied' three different bands were used.",
  "fb", "Continuous, Ordinal", "Two types of feedback given to the subjects. The 'Continuous' type involved ongoing feedback whereas 'Ordinal' feedback type was rank-based",
  "bandOrder", "Original, Reverse", "The order in which the velocity bands were presented for the 'Hit The Wall' task - either 'Original' or 'Reverse'.",
  "tOrder", "Test First, Train First", "The order of test and train stages.",
  "expMode", "train, train-Nf, test-Nf, test-train-nf, test-feedback", "Specifies the mode of the experiment. Can be one of the training stages, no-feedback testing from the training or novel extrapolation band, or feedback testing.",
  "trainStage", "Beginning, Middle, End, Test", "The stage of training for the individual - starting, middle, end, or if they're testing.",
  "expStage", "TrainStart, intTest1, TrainMid1, intTest2, TrainMid2, intTest3, TrainEnd, Test1, Test2, Test3", "The stages in the experiment which includes the start and end of training, intermediate tests, and final test stages.",
  "band", "1, 2, 3, 4, 5, 6", "Identifies the 6 different velocity bands used in the experiment.",
  "vb", "100-300, 350-550, 600-800, 800-1000, 1000-1200, 1200-1400", "Specifies the range of each velocity band used in the experiment.",
  "lowBound", "100, 350, 600, 800, 1000, 1200", "The lower boundary of each velocity band.",
  "feedback", "0, 1", "Binary representation of whether feedback was provided (1) or not (0)",
  "stage", "1 to 23", "The various stages during testing and feedback, represented by numbers from 1 to 23."
) %>% gt::gt() %>% 
        gt::tab_style(
                style = cell_text(weight = "bold"),
                locations = cells_column_labels()
        )
```




| Variable Name | Levels | Description |
| --- | --- | --- |
| `condit` | Constant, Varied | Conditions under which training was performed. In "Constant" only one velocity band was used, in "Varied" three different bands were used. |
| `fb` | Continuous, Ordinal | Two types of feedback given to the subjects. The "Continuous" type involved ongoing feedback whereas "Ordinal" feedback type was rank-based |
| `bandOrder` | Original, Reverse | The order in which the velocity bands were presented for the "Hit The Wall" task - either "Original" or "Reverse". |
| `tOrder` | Test First, Train First | The order of test and train stages. |
| `expMode` | train, train-Nf, test-Nf, test-train-nf, test-feedback | Specifies the mode of the experiment. Can be one of the training stages, no-feedback testing from the training or novel extrapolation band, or feedback testing. |
| `trainStage` | Beginning, Middle, End, Test | The stage of training for the individual - starting, middle, end, or if they're testing. |
| `expStage` | TrainStart, intTest1, TrainMid1, intTest2, TrainMid2, intTest3, TrainEnd, Test1, Test2, Test3 | The stages in the experiment which includes the start and end of training, intermediate tests, and final test stages. |
| `band` | 1, 2, 3, 4, 5, 6 | Identifies the 6 different velocity bands used in the experiment. |
| `vb` | 100-300, 350-550, 600-800, 800-1000, 1000-1200, 1200-1400 | Specifies the range of each velocity band used in the experiment. |
| `lowBound` | 100, 350, 600, 800, 1000, 1200 | The lower boundary of each velocity band. |
| `feedback` | 0, 1 | Binary representation of whether feedback was provided (1) or not (0) |
| `stage` | 1 to 23 | The various stages during testing and feedback, represented by numbers from 1 to 23. |


----------


id - unique subject identifier 
condit - primary training manipulation, Constant vs. Varied. 
tOrder - whether testing phase starts with extrapolation testing
expMode2







## Description table

| Variable Name | Variable Levels                 | Description                                                                               |
|---------------|---------------------------------|-------------------------------------------------------------------------------------------|
| condit        | Constant, Varied                | Condition of the experiment: constant or varied                                             |
| fb            | Continuous, Ordinal             | Type of feedback received: continuous or ordinal                                           |
| bandOrder     | Original, Reverse               | Order of bands: original or reverse                                                        |
| tOrder        | Test First, Train First         | Order of testing and training stages: test first or train first                            |
| expMode       | train, train-Nf, test-Nf, etc.  | Mode of the experiment: train, train-Nf, test-Nf, etc.                                    |
| trainStage    | Beginning, Middle, End, Test    | Stage of the training: beginning, middle, end, or test                                    |
| expStage      | TrainStart, intTest1, etc.      | Stage of the experiment: TrainStart, intTest1, TrainMid1, etc.                            |
| band          | 1, 2, 3, 4, 5, 6               | Band number                                                                                 |
| vb            | 100-300, 350-550, etc.         | Velocity band range                                                                         |
| lowBound      | 100, 350, 600, etc.            | Lower bound of the velocity band range                                                      |
| feedback      | 0, 1                           | Feedback type: 0 (no feedback), 1 (feedback)                                               |
| stage         | 1, 2, 3, etc.                  | Stage number of the experiment                                                              |

---



## Ascii table

| Variable Name | Variable Levels                                            | Description                                                          |
|---------------|------------------------------------------------------------|----------------------------------------------------------------------|
| condit        | Constant, Varied                                           | Unknown                                                              |
| fb            | Continuous, Ordinal                                        | Unknown                                                              |
| bandOrder     | Original, Reverse                                          | Unknown                                                              |
| tOrder        | Test First, Train First                                     | Unknown                                                              |
| expMode       | train, train-Nf, test-Nf, test-train-nf, test-feedback      | Unknown                                                              |
| trainStage    | Beginning, Middle, End, Test                                | Unknown                                                              |
| expStage      | TrainStart, intTest1, TrainMid1, intTest2, TrainMid2, intTest3, TrainEnd, Test1, Test2, Test3 | Unknown                                                              |
| band          | 1, 2, 3, 4, 5, 6                                           | Unknown                                                              |
| vb            | 100-300, 350-550, 600-800, 800-1000, 1000-1200, 1200-1400 | Unknown                                                              |
| lowBound      | 100, 350, 600, 800, 1000, 1200                             | Unknown                                                              |
| feedback      | 0, 1                                                       | Unknown                                                              |
| stage         | 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23 | Unknown                                                              |


| Default | Left | Right | Center |
|---------|:-----|------:|:------:|
| 12      | 12   |    12 |   12   |
| 123     | 123  |   123 |  123   |
| 1       | 1    |     1 |   1    |

: Demonstration of pipe table syntax


## smaller table

| Variable Name | Variable Levels                            |
|---------------|--------------------------------------------|
| condit        | "Constant", "Varied"                       |
| fb            | "Continuous", "Ordinal"                    |
| bandOrder     | "Original", "Reverse"                      |
| tOrder        | "Test First", "Train First"                |
| expMode       | "train", "train-Nf", "test-Nf", "test-train-nf", "test-feedback" |
| trainStage    | "Beginning", "Middle", "End", "Test"        |
| expStage      | "TrainStart", "intTest1", "TrainMid1", "intTest2", "TrainMid2", "intTest3", "TrainEnd", "Test1", "Test2", "Test3" |
| band          | "1", "2", "3", "4", "5", "6"                |
| vb            | "100-300", "350-550", "600-800", "800-1000", "1000-1200", "1200-1400" |
| lowBound      | "100", "350", "600", "800", "1000", "1200" |
| feedback      | "0", "1"                                   |
| stage         | "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23" |



```{r}
#| results: asis

# Create a data frame
var_levels <- list(
  condit = c("Constant", "Varied"),
  fb = c("Continuous", "Ordinal"),
  bandOrder = c("Original", "Reverse"),
  tOrder = c("Test First", "Train First"),
  expMode = c("train", "train-Nf", "test-Nf", "test-train-nf", "test-feedback"),
  trainStage = c("Beginning", "Middle", "End", "Test"),
  expStage = c("TrainStart", "intTest1", "TrainMid1", "intTest2", "TrainMid2", "intTest3", "TrainEnd", "Test1", "Test2", "Test3"),
  band = c("1", "2", "3", "4", "5", "6"),
  vb = c("100-300", "350-550", "600-800", "800-1000", "1000-1200", "1200-1400"),
  lowBound = c("100", "350", "600", "800", "1000", "1200"),
  feedback = c("0", "1"),
  stage = c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23")
)

# Convert the list to a data frame
df <- data.frame(
  Variable_Name = names(var_levels),
  Variable_Levels = sapply(var_levels, function(x) paste(x, collapse = ", "))
)

# Create a markdown table
df %>%
  kable(format = "markdown") %>%
  kable_styling(bootstrap_options = c("striped", "hover"))
```




| Variable Name | Variable Levels           |
| ------------- | ------------------------- |
| condit        | Constant, Varied          |
| fb            | Continuous, Ordinal       |
| bandOrder     | Original, Reverse         |
| tOrder        | Test First, Train First   |
| expMode       | train, train-Nf, test-Nf, test-train-nf, test-feedback |
| trainStage    | Beginning, Middle, End, Test |
| expStage      | TrainStart, intTest1, TrainMid1, intTest2, TrainMid2, intTest3, TrainEnd, Test1, Test2, Test3 |
| band          | 1, 2, 3, 4, 5, 6          |
| vb            | 100-300, 350-550, 600-800, 800-1000, 1000-1200, 1200-1400 |
| lowBound      | 100, 350, 600, 800, 1000, 1200 |
| feedback      | 0, 1                     |
| stage         | 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23 |



### Numeric variables

| Variable Name | Description |
| ------------- | ----------- |
| trial         | Trial number |
| nGoodTrial    | Number of good trials |
| gt.bandStage  | Band stage in game time |
| gt.stage      | Stage in game time |
| gt.train      | Training in game time |
| input         | Input from the participant |
| bandInt       | Band interval |
| highBound     | High boundary of the velocity band |
| runTotal      | Running total of trials |
| dist          | Distance between produced x-velocity and the closest edge of the current velocity band |
| sdist         | Standardized distance |
| vx            | X-velocity of the projectile |
| vxb           | X-velocity at the boundary |
| vxi           | Initial X-velocity |
| vy            | Y-velocity of the projectile |
| nTrain        | Number of training trials |
| nTestNf       | Number of no-feedback testing trials |
| nInt          | Number of interleaved trials |
| nTestF        | Number of feedback testing trials |
| nTotal        | Total number of trials |
| lastTrain     | Last training trial |
| lastTrial     | Last trial |

